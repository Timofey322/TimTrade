# Инкрементальное (до-)обучение модели в торговой системе

## Что это такое?
Инкрементальное обучение (online/incremental learning) — это подход, при котором модель не обучается с нуля на всех данных, а дообучается на новых поступающих данных, сохраняя знания, полученные ранее. Это позволяет:
- Постоянно адаптировать модель к новым рыночным условиям
- Не терять знания, полученные на исторических данных
- Снижать вычислительные затраты (не нужно каждый раз обучать с нуля)

## Как это реализовано в системе
- В конфиге (`config/improved_config.yaml`) есть параметр:
  ```yaml
  adaptive_learning:
    incremental_learning: true
  ```
- Если `incremental_learning: true`, то:
  1. При обучении система ищет файл модели с именем `improved_xgboost_{symbol}_latest.pkl`.
  2. Если файл найден — он загружается, и модель дообучается на новых данных (метод `incremental_fit`).
  3. Если файл не найден — модель обучается с нуля.
  4. После обучения модель сохраняется под тем же именем (перезаписывается).
  5. Для истории можно сохранять чекпоинты с временной меткой (опционально).

## Преимущества
- Модель не забывает старое, но быстро адаптируется к новым данным
- Можно реализовать скользящее окно (например, дообучать только на последних N днях)
- Удобно для автоматических пайплайнов и продакшн-систем

## Важно!
- Инкрементальное обучение поддерживается не всеми моделями. В XGBoost это возможно через параметр `xgb_model` или специальные методы.
- Если структура признаков изменилась, дообучение может быть некорректным — следите за совместимостью признаков!
- Если новые данные сильно отличаются от старых (дрифт), модель может начать хуже работать на старых паттернах.

## Как включить
1. В конфиге:
   ```yaml
   adaptive_learning:
     incremental_learning: true
   ```
2. Запустить пайплайн обучения — модель будет дообучаться, а не обучаться с нуля.

## Как отключить
- Поставьте `incremental_learning: false` — тогда модель всегда будет обучаться с нуля и сохраняться с уникальным именем.

---

**Рекомендуется периодически сохранять чекпоинты с временной меткой для возможности отката!** 